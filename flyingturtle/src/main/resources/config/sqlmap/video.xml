<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.flyingturtle.repository.mapper.VideoMapper">

	<!-- 전체 리스트 조회 -->
 	<select id="selectList" resultType="Video">
   	   select *
		from tb_viedo
    </select>
    <!-- 글상세정보 가져오기  -->
    <select id="selectByNo" parameterType="int" resultType="Video">
select *
from tb_viedo
where video_no = #{videoNo}
    </select>	
   <!--글등록  -->
	<insert id="insert" parameterType="Video" >
		insert into tb_viedo(
member_no, 
subject_no, 
title, 
content, 
video_addr
		) values (
		13,
		1,
		#{title},
		#{content},
		#{videoAddr})
	</insert>
	<!-- 글삭제 -->
	<delete id="delete" parameterType="int">
    	delete 
    	  from tb_viedo
         where video_no = #{videoNo}
    </delete>    
    
    <!-- 글수정 -->
    <update id="update" parameterType="Video">
    	update tb_viedo
    	   set 	title = #{title},
    	       	content = #{content},
    	       	video_addr = #{videoAddr}
    	 where video_no = #{videoNo}
    </update>
    
    <!-- 조회수 증가시키기 -->
	<update id="updateViewCnt" parameterType="int">
		update tb_viedo
		   set view_cnt = view_cnt + 1
		 where video_no = #{videoNo}
	</update>
        <!-- 전체 글 갯수 -->
    <select id="selectCount" resultType="int">
    	select count(*)
    	  from tb_viedo 
    </select>
 
    
 <!-- 댓글 목록========================================================== -->
	<select id="listCom" parameterType="int" resultType="videoCom">
	    select *
	      from tb_video_com
	     where video_no = #{videoNo}
	</select>
	
    <!-- 댓글 하나 가져오기 -->
	<select id="selectComByNo" parameterType="int" resultType="videoCom">
	    select *
	      from tb_video_com
	    where com_no = #{comNo}
	</select>
	
    <!-- 댓글 등록  -->
	<insert id="insertCom" parameterType="videoCom">
	insert into tb_video_com(video_no, member_no, content) 
		values (#{videoNo}, 1, #{content})
	</insert>
	
	<!--  댓글 삭제  -->
	<delete id="deleteCom" parameterType="int">
	    delete 
	      from tb_video_com
	     where com_no = #{comNo}
	</delete>
	
	<!--  댓글 수정  -->
	<update id="updateCom" parameterType="videoCom">
	    update tb_video_com
	       set content = #{content}
	     where com_no = #{comNo}
	</update> 	
    
   

</mapper>